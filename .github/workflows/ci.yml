name: Debug Paths Filter

on:
  push:
    paths:
      - '**'

jobs:
  filter:
    name: ðŸ”€ Path filter
    runs-on: ubuntu-latest
    outputs:
      s3: ${{ steps.filter.outputs.s3 }}
      ssm: ${{ steps.filter.outputs.ssm }}
      other: ${{ steps.filter.outputs.unmatched }}
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - id: filter
        uses: dorny/paths-filter@v2
        with:
          filters: |
            s3:
              - 'modules/s3_bucket/**' # Match all files under s3_bucket
            ssm:
              - 'modules/ssm_parameter/**' # Match all files under ssm_parameter
            unmatched:
              - '**' # Match everything
              - '!modules/s3_bucket/**' # Exclude s3_bucket files
              - '!modules/ssm_parameter/**' # Exclude ssm_parameter files

      - name: Debug filter outputs
        run: |
          echo "Matched files for s3:"
          echo "${{ steps.filter.outputs.s3 }}"
          echo "Matched files for ssm:"
          echo "${{ steps.filter.outputs.ssm }}"
          echo "Matched files for unmatched:"
          echo "${{ steps.filter.outputs.unmatched }}"
        
      - name: Debug Git Diff
        run: |
         git diff --name-status refs/remotes/origin/main...refs/remotes/origin/feature/olivier